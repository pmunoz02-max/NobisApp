<script id="patch-diagnostics-v1">
(function(){
  try{
    if (window.__PATCH_DIAG_V1__) return;
    window.__PATCH_DIAG_V1__ = true;
    function showErr(msg){
      try{
        var b = document.getElementById('nobis-error-banner');
        if(!b){
          b = document.createElement('div');
          b.id='nobis-error-banner';
          b.style.cssText='position:fixed;left:0;right:0;top:0;z-index:99999;background:#fee2e2;color:#7f1d1d;font:12px/1.4 system-ui,Arial;padding:8px 12px;box-shadow:0 2px 6px rgba(0,0,0,.08)';
          document.body.appendChild(b);
        }
        var p=document.createElement('div'); p.textContent='Error JS: '+msg; b.appendChild(p);
        setTimeout(function(){ if(p&&p.parentNode) p.parentNode.removeChild(p); }, 10000);
      }catch(_){}
    }
    window.addEventListener('error', function(e){ try{ showErr(e && e.message ? e.message : 'Error desconocido'); }catch(_){} });
    window.addEventListener('unhandledrejection', function(e){ try{ showErr('Promise: ' + (e && e.reason ? (e.reason.message||e.reason) : 'Rechazo')); }catch(_){} });
  }catch(_){}
})();
</script>
